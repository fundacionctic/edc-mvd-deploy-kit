# ============================================
# ISSUER SERVICE CONFIGURATION
# ============================================

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ DEPLOYMENT MODE CONFIGURATION                                               │
# └─────────────────────────────────────────────────────────────────────────────┘
#
# Set to 'true' to deploy a local Issuer Service alongside the Provider.
# Set to 'false' to use an external/shared Issuer Service (recommended for production).
#
# DEPLOYMENT SCENARIOS:
# ──────────────────────────────────────────────────────────────────────────────
# Scenario A: Local Development (DEPLOY_ISSUER=true)
#   - Deploys both Issuer and Provider locally using docker-compose
#   - Issuer runs on host.docker.internal
#   - Best for: Local development, testing, and demos
#   - Commands: task issuer:deploy && task provider:deploy
#
# Scenario B: Provider with External Issuer (DEPLOY_ISSUER=false)
#   - Only deploys Provider, connects to a shared remote Issuer
#   - Update ISSUER_PUBLIC_HOST to point to remote Issuer URL
#   - Best for: Production dataspace participants using shared infrastructure
#   - Commands: task provider:deploy (Issuer tasks are skipped)
#   - Requirements: Remote Issuer must be already configured with:
#     * Required credential definitions
#     * Trust frameworks and policies
#     * Participant registration
#
# Scenario C: Issuer Only (for shared infrastructure providers)
#   - Only deploys Issuer Service for use by multiple participants
#   - Best for: Dataspace operators providing shared Issuer infrastructure
#   - Commands: task issuer:deploy
# ──────────────────────────────────────────────────────────────────────────────
DEPLOY_ISSUER=true

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ ISSUER CONNECTION CONFIGURATION                                             │
# └─────────────────────────────────────────────────────────────────────────────┘

# Issuer Public DNS/Hostname (for DID resolution)
# This hostname is used to construct the Issuer's DID (Decentralized Identifier)
# and must be accessible by other participants in the dataspace for DID resolution.
#
# LOCAL DEPLOYMENT (DEPLOY_ISSUER=true):
#   Use: host.docker.internal (standardized Docker hostname for local testing)
#   Example: host.docker.internal
#
# EXTERNAL ISSUER (DEPLOY_ISSUER=false):
#   Use: Fully qualified domain name or IP address of the remote Issuer Service
#   Example: issuer.dataspace.example.com
#   Example: 192.168.1.100
#   Note: Must be network-accessible from Provider containers
#
# Impact: Changes to this value require regenerating DIDs and updating participant configurations
# Note: ISSUER_DID is generated dynamically from ISSUER_PUBLIC_HOST and ISSUER_DID_API_PORT
ISSUER_PUBLIC_HOST=host.docker.internal

# Issuer Service Ports
# Each port exposes a specific API or service.
#
# LOCAL DEPLOYMENT (DEPLOY_ISSUER=true):
#   These define which ports the local Issuer containers will bind to
#   Ensure these don't conflict with other services on your machine
#
# EXTERNAL ISSUER (DEPLOY_ISSUER=false):
#   These define which ports the Provider will use to connect to the remote Issuer
#   Match these to the ports exposed by your external Issuer Service
#   Most critical for Provider connectivity: HTTP, ISSUANCE, ADMIN, DID_API ports
#
# Impact: Port changes require updating docker-compose.yml and any client configurations
ISSUER_HTTP_PORT=10010           # Main HTTP API endpoint - primary interface for issuer operations
ISSUER_STS_PORT=10011            # Secure Token Service - handles OAuth2/OIDC token issuance
ISSUER_ISSUANCE_PORT=10012       # Credential issuance endpoint - issues verifiable credentials to participants
ISSUER_ADMIN_PORT=10013          # Admin API - CRITICAL for seeding and administrative operations
ISSUER_VERSION_PORT=10014        # Version/capabilities endpoint - exposes service metadata and supported features
ISSUER_IDENTITY_PORT=10015       # Identity/credential service - manages identity-related operations
ISSUER_DID_API_PORT=10016        # DID resolution endpoint - resolves DIDs to DID documents (used for DID generation)
ISSUER_STATUSLIST_PORT=10017     # Status list endpoint - serves credential status lists for revocation checking
ISSUER_DEBUG_PORT=1043           # Remote debugging port for Java applications (JPDA)

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ LOCAL ISSUER INFRASTRUCTURE (Only for DEPLOY_ISSUER=true)                  │
# └─────────────────────────────────────────────────────────────────────────────┘
# The following configurations are ONLY used when deploying a local Issuer Service.
# If DEPLOY_ISSUER=false, these settings are ignored (no local infrastructure is deployed).

# Issuer Database Configuration
# PostgreSQL database credentials for the issuer service
# Impact: Stores issued credentials, participant metadata, and service state
# Security: Change default credentials in production environments
ISSUER_DB_NAME=issuer            # Database name - isolated from other service databases
ISSUER_DB_USER=issuer            # Database username - must match PostgreSQL user creation
ISSUER_DB_PASSWORD=issuer        # Database password - CHANGE IN PRODUCTION!

# Issuer Vault Configuration
# HashiCorp Vault integration for secure key management and secrets storage
# Impact: Used to store private keys, credentials, and other sensitive data
# Security: In production, use proper Vault authentication methods (AppRole, Kubernetes auth, etc.)
# instead of static root tokens
ISSUER_VAULT_TOKEN=root          # Vault access token - ONLY use 'root' in development!

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ ISSUER AUTHENTICATION (Required for both local and external Issuer)        │
# └─────────────────────────────────────────────────────────────────────────────┘
# These credentials are required regardless of DEPLOY_ISSUER setting, as the Provider
# needs them to authenticate with the Issuer Service (whether local or remote).
#
# EXTERNAL ISSUER: Obtain these credentials from your Issuer Service administrator

# Superuser credentials for accessing admin endpoints (base64 encoded)
# Format: base64(username).base64(password)
# Default decodes to: super-user / super-secret-key
# Impact: Required for seeding operations and administrative API calls
# Security: CRITICAL - CHANGE FOR PRODUCTION! Generate new credentials and base64 encode them
# Example: echo -n "admin" | base64 gives YWRtaW4=
ISSUER_SUPERUSER_KEY=c3VwZXItdXNlcg==.c3VwZXItc2VjcmV0LWtleQo=

# Identity API authentication key
# Used to authenticate requests to the Identity API endpoints
# Impact: Required for identity-related operations (credential requests, verification)
# Security: Change from default 'password' in production
ISSUER_IDENTITY_API_KEY=password

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ ISSUER OPERATIONAL CONFIGURATION (Only for DEPLOY_ISSUER=true)             │
# └─────────────────────────────────────────────────────────────────────────────┘
# These settings configure the operational behavior of a local Issuer Service.
# If DEPLOY_ISSUER=false, these settings are ignored.

# Issuer Signing Key Configuration
# Alias for the cryptographic key used to sign credentials and status lists
# Impact: This alias is used to retrieve the signing key from Vault
# Must match the key alias used when uploading keys to Vault
ISSUER_SIGNING_KEY_ALIAS=statuslist-signing-key

# Credential Validity Configuration
# Duration in seconds for how long issued credentials remain valid
# Default: 15552000 seconds (180 days = 180 * 24 * 60 * 60)
# Impact: Affects credential expiration time and renewal frequency
# Security: Shorter validity periods improve security but require more frequent renewals
ISSUER_CREDENTIAL_VALIDITY_SECONDS=15552000

# ============================================
# PROVIDER PARTICIPANT CONFIGURATION
# ============================================

# Provider Public DNS/Hostname (for DID resolution)
# This hostname is used to construct the Provider's DID (Decentralized Identifier)
# and must be accessible by other participants in the dataspace for DID resolution.
# Development: host.docker.internal (standardized Docker hostname for local testing)
# Production: provider.yourdomain.com (publicly accessible domain)
# Impact: Changes require regenerating DIDs and updating peer participant configurations
PROVIDER_PUBLIC_HOST=host.docker.internal

# Provider Participant Identifier
# Unique name for this provider participant in the dataspace
# Impact: Used in logging, monitoring, and participant identification
# Must be unique across all dataspace participants
PROVIDER_PARTICIPANT_NAME=provider

# Control Plane Ports
# The Control Plane manages policies, contracts, and orchestrates data transfers
# Impact: Port changes require updating docker-compose.yml and client configurations
PROVIDER_CP_WEB_PORT=8080        # Web/API endpoint - general-purpose HTTP interface
PROVIDER_CP_MANAGEMENT_PORT=8081 # Management API - administrative operations (create assets, policies, etc.)
PROVIDER_CP_PROTOCOL_PORT=8082   # Protocol endpoint - DSP (Dataspace Protocol) communication with other participants
PROVIDER_CP_CONTROL_PORT=8083    # Control API - internal control operations for data plane coordination
PROVIDER_CP_CATALOG_PORT=8084    # Catalog API - exposes available datasets and services to other participants
PROVIDER_CP_DEBUG_PORT=1044      # Remote debugging port for Java applications (JPDA)

# Data Plane Ports
# The Data Plane handles actual data transfer operations after contract negotiation
# Impact: Port changes require updating docker-compose.yml and data transfer configurations
PROVIDER_DP_WEB_PORT=8090        # Web/API endpoint - data plane HTTP interface
PROVIDER_DP_CONTROL_PORT=8093    # Control API - receives instructions from control plane for data transfers
PROVIDER_DP_PUBLIC_PORT=11002    # Public endpoint - exposed for external data transfer requests
PROVIDER_DP_DEBUG_PORT=1045      # Remote debugging port for Java applications (JPDA)

# Identity Hub Ports
# The Identity Hub manages identity, credentials, and trust for the provider participant
# Impact: Port changes require updating docker-compose.yml and identity-related configurations
PROVIDER_IH_WEB_PORT=7000        # Web/API endpoint - primary identity hub interface
PROVIDER_IH_CREDENTIALS_PORT=7001 # Credentials API - manages and presents verifiable credentials
PROVIDER_IH_STS_PORT=7002        # Secure Token Service - issues and validates security tokens
PROVIDER_IH_DID_PORT=7003        # DID resolution endpoint - resolves DIDs to DID documents (used for DID generation)
PROVIDER_IH_IDENTITY_PORT=7005   # Identity API - handles identity-related operations and authentication
PROVIDER_IH_DEBUG_PORT=1046      # Remote debugging port for Java applications (JPDA)

# Database Configuration
# PostgreSQL database credentials for the provider service components
# Each component (Control Plane, Data Plane, Identity Hub) uses separate database credentials
# for security isolation and access control
# Impact: Stores contracts, policies, assets, transfer history, and identity data
# Security: Change default credentials in production environments
PROVIDER_DB_NAME=provider        # Main database name - shared across provider components
PROVIDER_DB_USER=provider        # Main database user - administrative access
PROVIDER_DB_PASSWORD=provider    # Main database password - CHANGE IN PRODUCTION!

# Control Plane Database Credentials
# Isolated credentials for Control Plane to access its schema/tables
PROVIDER_CP_DB_USER=provider_cp         # Control Plane database user
PROVIDER_CP_DB_PASSWORD=provider_cp     # Control Plane database password - CHANGE IN PRODUCTION!

# Data Plane Database Credentials
# Isolated credentials for Data Plane to access its schema/tables
PROVIDER_DP_DB_USER=provider_dp         # Data Plane database user
PROVIDER_DP_DB_PASSWORD=provider_dp     # Data Plane database password - CHANGE IN PRODUCTION!

# Identity Hub Database Credentials
# Isolated credentials for Identity Hub to access its schema/tables
PROVIDER_IH_DB_USER=provider_ih         # Identity Hub database user
PROVIDER_IH_DB_PASSWORD=provider_ih     # Identity Hub database password - CHANGE IN PRODUCTION!

# Vault Configuration
# HashiCorp Vault integration for secure key management and secrets storage
# Impact: Used to store private keys, credentials, and other sensitive data
# Security: In production, use proper Vault authentication methods (AppRole, Kubernetes auth, etc.)
# instead of static root tokens
PROVIDER_VAULT_TOKEN=root        # Vault access token - ONLY use 'root' in development!

# Authentication Keys
# API keys for authenticating requests to various provider endpoints
# Impact: Required for making API calls to management, catalog, and identity services
# Security: Change from default 'password' in production and use strong, unique keys
PROVIDER_MANAGEMENT_API_KEY=password   # Management API authentication - for administrative operations
PROVIDER_CATALOG_API_KEY=password      # Catalog API authentication - for catalog access and queries
PROVIDER_IDENTITY_API_KEY=password     # Identity API authentication - for identity operations

# Provider Identity Hub Superuser Key
# Superuser credentials for accessing Provider's Identity Hub admin endpoints (base64 encoded)
# Format: base64(username).base64(password)
# Default decodes to: super-user / super-secret-key
# Impact: Required for Provider Identity Hub administrative operations (participant registration, credential management)
# Security: CRITICAL - This should be DIFFERENT from ISSUER_SUPERUSER_KEY in production!
# Note: While the Issuer controls credential issuance, the Provider controls its own Identity Hub
PROVIDER_IDENTITY_SUPERUSER_KEY=c3VwZXItdXNlcg==.c3VwZXItc2VjcmV0LWtleQo=

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ DATA SOURCE CONFIGURATION                                                   │
# └─────────────────────────────────────────────────────────────────────────────┘
# Configure the data sources that will be exposed as assets in the dataspace.
# These settings allow you to customize what data your provider makes available
# to other participants in the dataspace.
#
# FLEXIBLE ASSET CONFIGURATION:
# You can define any number of assets using the pattern PROVIDER_ASSET_{N}_*
# where {N} is any positive integer (1, 2, 3, 100, etc.)
#
# REQUIRED FIELDS (per asset):
# - PROVIDER_ASSET_{N}_ID: Unique identifier for the asset
# - PROVIDER_ASSET_{N}_BASE_URL: The actual data source URL
#
# OPTIONAL FIELDS (per asset):
# - PROVIDER_ASSET_{N}_DESCRIPTION: Human-readable description (defaults to "Asset {N}")
# - PROVIDER_ASSET_{N}_PROXY_PATH: Enable path proxying (defaults to "true")
# - PROVIDER_ASSET_{N}_PROXY_QUERY_PARAMS: Enable query parameter proxying (defaults to "true")
# - PROVIDER_ASSET_{N}_TYPE: Data address type (defaults to "HttpData")
# - PROVIDER_ASSET_{N}_PROPERTY_{NAME}: Custom asset properties
# - PROVIDER_ASSET_{N}_DATA_{NAME}: Custom data address properties
#
# EXAMPLES:

PROVIDER_ASSET_1_ID=asset-1
PROVIDER_ASSET_1_DESCRIPTION=An asset.
PROVIDER_ASSET_1_BASE_URL=https://jsonplaceholder.typicode.com/posts
PROVIDER_ASSET_1_ACCESS_POLICY=allow-all
PROVIDER_ASSET_1_CONTRACT_POLICY=require-membership

PROVIDER_ASSET_2_ID=asset-2
PROVIDER_ASSET_2_DESCRIPTION=Another asset.
PROVIDER_ASSET_2_BASE_URL=https://jsonplaceholder.typicode.com/todos
PROVIDER_ASSET_2_ACCESS_POLICY=allow-all
PROVIDER_ASSET_2_CONTRACT_POLICY=require-membership
