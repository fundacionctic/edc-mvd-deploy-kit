# ============================================
# MVD CONFIGURATION (Updated for Public DNS)
# ============================================
# Copy this file to .env and customize as needed

# ============================================
# ISSUER SERVICE CONFIGURATION
# ============================================

# Issuer Mode: 'local' (deploy our own) or 'external' (use existing issuer)
ISSUER_MODE=local

# Issuer Identity (DID)
# Development: did:web:localhost%3A9876
# Production: did:web:issuer.yourdomain.com (use public DNS without port for 443)
ISSUER_DID=did:web:localhost%3A9876

# Issuer Public DNS/Hostname (for DID resolution)
# Development: localhost
# Production: issuer.yourdomain.com
ISSUER_PUBLIC_HOST=localhost
ISSUER_PUBLIC_PORT=9876

# Internal Issuer Service URLs (used when ISSUER_MODE=local)
# These are Docker service names for inter-container communication
ISSUER_SERVICE_NAME=issuer-service
ISSUER_DID_SERVER_NAME=issuer-did

# External Issuer URLs (used when ISSUER_MODE=external)
# Only needed if ISSUER_MODE=external
ISSUER_EXTERNAL_STS_URL=
ISSUER_EXTERNAL_ISSUANCE_URL=
ISSUER_EXTERNAL_ADMIN_URL=
ISSUER_EXTERNAL_IDENTITY_URL=

# Issuer Service Ports (for local deployment)
ISSUER_HTTP_PORT=10010       # Main API
ISSUER_STS_PORT=10011        # Secure Token Service
ISSUER_ISSUANCE_PORT=10012   # Credential Issuance API
ISSUER_ADMIN_PORT=10013      # Admin API
ISSUER_VERSION_PORT=10014    # Version/Discovery API
ISSUER_IDENTITY_PORT=10015   # Identity API
ISSUER_DEBUG_PORT=1047       # Remote debugging

# Issuer Database (only for local deployment)
ISSUER_DB_NAME=issuer
ISSUER_DB_USER=issuer
ISSUER_DB_PASSWORD=issuer_password

# Issuer Vault (only for local deployment)
ISSUER_VAULT_TOKEN=issuer-vault-token

# Issuer Signing Key Configuration
ISSUER_SIGNING_KEY_ALIAS=issuer-signing-key

# Key file paths (generated during setup)
ISSUER_PUBLIC_KEY_FILE=assets/issuer/public.pem
ISSUER_PRIVATE_KEY_FILE=assets/issuer/private.pem

# ============================================
# PARTICIPANT IDENTITY CONFIGURATION
# ============================================

# Participant DID
# Development: did:web:identityhub%3A7083
# Production: did:web:participant.yourdomain.com
PARTICIPANT_DID=did:web:identityhub%3A7083

# Participant Public DNS/Hostname (for DID resolution)
# Development: identityhub (Docker service name)
# Production: participant.yourdomain.com
PARTICIPANT_PUBLIC_HOST=identityhub
PARTICIPANT_PUBLIC_PORT=7083

# Participant Key Configuration
PARTICIPANT_KEY_ALIAS=key-1
PARTICIPANT_PUBLIC_KEY_FILE=assets/keys/consumer_public.pem
PARTICIPANT_PRIVATE_KEY_FILE=assets/keys/consumer_private.pem

# ============================================
# API AUTHENTICATION
# ============================================

# CHANGE THESE FOR PRODUCTION!
MANAGEMENT_API_KEY=password
CATALOG_API_KEY=password
IDENTITY_API_KEY=password
SUPERUSER_API_KEY=c3VwZXItdXNlcg==.c3VwZXItc2VjcmV0LWtleQo=

# ============================================
# VAULT CONFIGURATION
# ============================================

# CHANGE FOR PRODUCTION!
VAULT_TOKEN=root-token

# ============================================
# DATABASE CONFIGURATION
# ============================================

# CHANGE FOR PRODUCTION!
DB_USER=mvd_user
DB_PASSWORD=mvd_password
DB_NAME=mvd

# ============================================
# PORT MAPPINGS (Host:Container)
# ============================================

# IdentityHub Ports
IDENTITYHUB_PORT=7080           # Main API
IDENTITYHUB_CREDENTIALS_PORT=7081  # Credentials API
IDENTITYHUB_IDENTITY_PORT=7082  # Identity API
IDENTITYHUB_DID_PORT=7083       # DID endpoint
IDENTITYHUB_STS_PORT=7086       # STS API
IDENTITYHUB_DEBUG_PORT=1044     # Remote debugging

# Controlplane Ports
CONTROLPLANE_PORT=8080          # Main API
CONTROLPLANE_MGMT_PORT=8081     # Management API
CONTROLPLANE_DSP_PORT=8082      # DSP Protocol endpoint
CONTROLPLANE_CONTROL_PORT=8083  # Control API
CONTROLPLANE_CATALOG_PORT=8084  # Catalog API
CONTROLPLANE_DEBUG_PORT=1045    # Remote debugging

# Dataplane Ports
DATAPLANE_PUBLIC_PORT=11001     # Public API (data access)
DATAPLANE_CONTROL_PORT=11002    # Control API
DATAPLANE_PORT=11003            # Main API
DATAPLANE_DEBUG_PORT=1046       # Remote debugging

# Infrastructure Ports
POSTGRES_PORT=5432
VAULT_PORT=8200

# ============================================
# BUILD CONFIGURATION
# ============================================

# MVD Git reference to use (branch name or commit ID)
# Common values: release/0.14.0, main, 69e4b0b
MVD_REF=69e4b0b

# ============================================
# COMPUTED URLs (DO NOT EDIT)
# ============================================
# These are automatically computed from the above settings

# External URLs (from host machine)
VAULT_HOST_URL=http://localhost:${VAULT_PORT}
IDENTITYHUB_HOST_URL=http://localhost:${IDENTITYHUB_IDENTITY_PORT}
CONTROLPLANE_MGMT_HOST_URL=http://localhost:${CONTROLPLANE_MGMT_PORT}

# Internal URLs (from Docker containers)
VAULT_CONTAINER_URL=http://vault:8200
POSTGRES_CONTAINER_URL=jdbc:postgresql://postgres:5432
IDENTITYHUB_CONTAINER_URL=http://identityhub:7082
CONTROLPLANE_CONTAINER_URL=http://controlplane:8082

# Issuer URLs (computed based on ISSUER_MODE)
# When ISSUER_MODE=local, these point to local services
# When ISSUER_MODE=external, these use ISSUER_EXTERNAL_* variables
